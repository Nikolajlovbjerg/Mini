@page "/mine-anmodninger/{AnnonceId:int}"
@inject HttpClient Http
@using Core;
@using PW1

<h3>Mine Anmodninger</h3>

@if (anmodninger == null)
{
    <p>Henter...</p>
}
else if (!anmodninger.Any())
{
    <p>Ingen anmodninger endnu.</p>
}
else
{
    <ul>
        @foreach (var a in anmodninger)
        {
            <li>
                <b>@a.AnnonceId</b> — @a.Status — @a.Date
            </li>
        }
    </ul>
}

@code {
    [Parameter] public int AnnonceId { get; set; }
    private List<Anmodning>? anmodninger = null;

    protected override async Task OnInitializedAsync()
    {
        anmodninger = await Http.GetFromJsonAsync<List<Anmodning>>(
            $"http://localhost:{PASSWORD.localPort}/api/anmodning"
        );
    }
}