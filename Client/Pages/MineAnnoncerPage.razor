@page "/annoncer"
@using Client.PW1
@inject NavigationManager Nav
@using Client.Components
@using Core;
@using PW1
@inject HttpClient http


<h3>Mine annoncer</h3>
@if (annoncer.Count == 0 )
{
    <p>No products</p>
}
else
{
    <div class="d-flex flex-wrap">
        @foreach(var p in annoncer)
        {
            <AnnonceCard Annonce="p"/>
        }
    </div>
}
<button class="btn btn-primary" @onclick="GoToTilføjAnnoncePage"> 
    Opret Ny Annonce
</button>


@code {

    private List<Annonce> annoncer = new();

	protected override async Task OnInitializedAsync()
	{
		annoncer = await http.GetFromJsonAsync<List<Annonce>>($"http://localhost:{PASSWORD.localPort}/api/annonce");
	}
	
	void GoToTilføjAnnoncePage()
	{
		Nav.NavigateTo("/TilføjAnnonce");
	}


}
